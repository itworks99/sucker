(this.webpackJsonpsucker=this.webpackJsonpsucker||[]).push([[0],{162:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(57),i=c.n(a),r=(c(154),c(93)),o=c(20),l=c(122),j=c.n(l),d=c(194),b=c(190),u=c(64),h=c(193),O=c(90),x=c(189),f=c(179),g=c(163),p=c(187),v=c(185),m=c(191),w=c(199),C=c(181),y=c(192),S=c(196),k=c(195),T=c(182),_=c(197),A=c(188),E=c(186),q=c(183),R=c(184),F=c(180),I=c(2);function P(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),l=Object(o.a)(i,2),P=l[0],H=l[1],N=Object(n.useState)(0),z=Object(o.a)(N,2),L=z[0],B=z[1],G=Object(n.useState)(!1),U=Object(o.a)(G,2),V=U[0],D=U[1],J=Object(n.useState)(!1),W=Object(o.a)(J,2),X=W[0],K=W[1],M=Object(n.useState)(""),Q=Object(o.a)(M,2),Y=Q[0],Z=Q[1],$=Object(n.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ce=ee[1],ne=Object(n.useState)(""),se=Object(o.a)(ne,2),ae=se[0],ie=se[1],re=Object(n.useState)(""),oe=Object(o.a)(re,2),le=oe[0],je=oe[1],de=Object(n.useState)(!1),be=Object(o.a)(de,2),ue=be[0],he=be[1],Oe=Object(n.useState)(!1),xe=Object(o.a)(Oe,2),fe=xe[0],ge=xe[1],pe=Object(n.useState)(),ve=Object(o.a)(pe,2),me=ve[0],we=ve[1],Ce=Object(n.useState)(),ye=Object(o.a)(Ce,2),Se=ye[0],ke=ye[1],Te=Object(n.useState)(),_e=Object(o.a)(Te,2),Ae=_e[0],Ee=_e[1],qe=Object(n.useState)(),Re=Object(o.a)(qe,2),Fe=Re[0],Ie=Re[1],Pe=Object(n.useState)(),He=Object(o.a)(Pe,2),Ne=He[0],ze=He[1],Le=[],Be=[];function Ge(){K(!X)}function Ue(e){Y.is_enabled[e.target.value]=!Y.is_enabled[e.target.value]}function Ve(e,t){B(t.value)}var De=function(e,t){var n=t.index;a(c===n?-1:n)};function Je(){ke(!Se)}function We(e){we(e)}function Xe(){ge(!1)}function Ke(e,t){var c=t.entrynumber,n=t.value;Y.value[c]=n}function Me(e){Ie(e.target.value),D(!V)}function Qe(e,t){var c=t.entrynumber;Le[c].current.focus()}Object(n.useEffect)((function(){function e(e,t){var c;return t.endsWith("version")&&(c=JSON.stringify({version:le})),fetch(t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Request-Headers":"X-Requested-With, Content-Type, Accept, access-control-allow-headers, X-CSRF-Token, access-control-allow-methods, access-control-allow-origin"},body:c}).then((function(e){return e.json()})).then((function(e){Z(e)})).then(ce(!0),(function(e){ze(e)})),he(!1)}return""===le?e("GET","http://localhost:3000/json"):e("OPTIONS","http://localhost:3000/version"),function(){ce(!1)}}),[le]);var Ye="grey",Ze="purple",$e={loading:!1,results:[],value:""};var et=function(e,t,c,n){return Object(I.jsxs)(b.a,{dimmer:"inverted",open:e,closeOnEscape:!0,onClose:Xe,children:[Object(I.jsxs)(b.a.Header,{children:[Object(I.jsx)(u.a,{name:t}),Object(I.jsx)(I.Fragment,{children:c})]}),n]})};var tt=s.a.useReducer((function(e,t){switch(t.type){case"CLEAN_QUERY":return $e;case"START_SEARCH":return Object(r.a)(Object(r.a)({},e),{},{loading:!0,value:t.query});case"FINISH_SEARCH":return Object(r.a)(Object(r.a)({},e),{},{loading:!1,results:t.results});default:throw new Error}}),$e),ct=Object(o.a)(tt,2),nt=ct[0],st=ct[1],at=nt.loading,it=nt.results,rt=nt.value,ot=s.a.useRef(),lt=s.a.useCallback((function(e,t){clearTimeout(ot.current),st({type:"START_SEARCH",query:t.value}),ot.current=setTimeout((function(){if(t.value.length<1)st({type:"CLEAN_QUERY"});else{var e=new RegExp(j.a.escapeRegExp(t.value),"i"),c=j.a.filter(Be,(function(t){return e.test(t.title)}));st({type:"FINISH_SEARCH",results:c})}}),300)}),[Be]);if(s.a.useEffect((function(){return function(){clearTimeout(ot.current)}}),[]),s.a.useEffect((function(){}),[L]),Ne)return Object(I.jsxs)("div",{children:["Error: ",Ne.message]});var jt="";if(!1===te||void 0===Y.tags)jt=Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(k.a,{inverted:!0,active:!te,children:Object(I.jsx)(T.a,{inverted:!0,size:"massive",children:"Loading"})})});else{""===le&&je(Y.squid_version[0]),Y.tags.forEach((function(e,t){return Be.push({title:"".concat(e),record:t})}));var dt=Y.tags[L-1],bt=Y.help[L-1];jt=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(_.a,{children:Object(I.jsx)(A.a,{fixed:"top",inverted:!0,fitted:"vertically",children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(A.a.Item,{as:"a",header:!0,onClick:Je,children:Object(I.jsxs)(d.a,{inverted:!0,as:"h3",children:[Object(I.jsx)(u.a,{inverted:!0,name:"circle outline",color:Ze,size:"big"}),Object(I.jsxs)(d.a.Content,{children:["Sucker ","0.3"]}),Object(I.jsx)(d.a.Subheader,{children:"Squid configuration editor"})]})}),Object(I.jsx)(A.a.Item,{as:"a",children:Object(I.jsx)(E.a,{placeholder:"Search tags",minCharacters:2,loading:at,onResultSelect:function(e,t){var c=t.result.record;a(Y.section_number[c]),H(c),1!==Y.switchable[c]&&Le[c].current.focus()},onSearchChange:lt,resultRenderer:function(e){var t=e.title,c=e.record,n=Object(I.jsx)(d.a.Subheader,{children:Y.all_sections[Y.section_number[c]].toLowerCase()});return Object(I.jsxs)(d.a,{size:"tiny",children:[t,n]},c)},results:it,value:rt})}),Object(I.jsx)(A.a.Item,{children:Object(I.jsxs)(d.a,{inverted:!0,as:"h5",children:["Squid version"," ",Object(I.jsx)(p.a,{options:function(){for(var e=[],t=0;t<Y.available_versions.length;t+=1)e.push({key:t,text:Y.available_versions[t],value:Y.available_versions[t]});return e}(),inline:!0,defaultValue:le,onChange:function(e){var t=e.target.innerText;je(t),he(!0)}})]})}),Object(I.jsx)(A.a.Item,{as:"a",onClick:function(){ge(!0)},children:Object(I.jsxs)(d.a,{inverted:!0,as:"h5",children:[Object(I.jsx)(u.a,{name:"magic"}),"Show"]})}),Object(I.jsx)(A.a.Item,{as:"a",onClick:Ge,children:Object(I.jsxs)(d.a,{inverted:!0,as:"h5",children:[Object(I.jsx)(u.a,{name:"download"}),"Import"]})})]})})}),Object(I.jsx)(q.a,{}),Object(I.jsxs)(S.a,{centered:!0,columns:3,children:[Object(I.jsx)(S.a.Column,{widescreen:4,computer:2,children:Object(I.jsxs)(h.a,{color:Ye,children:[Object(I.jsxs)("p",{children:["Loaded configuration for Squid ver. ",Object(I.jsx)("b",{children:le})]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("b",{children:Y.tags.length})," unique tags in"," ",Object(I.jsx)("b",{children:Y.all_sections.length})," sections"]}),Object(I.jsx)("p",{children:ae}),Object(I.jsx)("p",{children:"Legend:"}),Object(I.jsxs)("p",{children:[Object(I.jsx)(u.a,{name:"tags"})," - selected section"]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(u.a,{name:"tags",color:Ye})," - section without enabled options"]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(u.a,{name:"tags",color:Ze})," - section with enabled options"]})]})}),Object(I.jsx)(S.a.Column,{widescreen:6,computer:7,children:Object(I.jsx)("div",{ref:function(){return We},children:Object(I.jsx)(C.a,{children:Object(I.jsx)(y.a,{styled:!0,fluid:!0,children:function(){var e=[];function t(e,t){return Array.from(e,(function(e){return{key:"".concat(t," ").concat(e),text:"".concat(t," ").concat(e),value:"".concat(t," ").concat(e)}}))}if(Y)for(var n=0,a=0,i="",r="",o="",l=[],j=0;j<Y.all_sections.length;j+=1){var d=[],b=[];for(d[j]="";Y.section_number[n]===j;){Y.is_enabled[n]>0&&(l[j]=Ze);var h="";d[j]+="".concat(Y.tags[n],"\n"),Le[n]=s.a.createRef();var k=Le[n];if(Y.switchable[n])if(1===Y.switchable[n]){var T=t(["on","off"],Y.tags[n]);h=Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(p.a,{ref:k,entrynumber:a,fluid:!0,selection:!0,options:T,defaultValue:T[Y.switch_position[n]].value,onChange:Ke})})}else 2===Y.switchable[n]&&(h=Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(g.a,{ref:k,secondary:!0,compact:!0,value:n,onClick:Me,children:[Y.tags[n]," - Click to edit"]})}));else o=Y.units[n]?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(O.a,{basic:!0,content:Y.units[n],horizontal:!0})}):"",h=Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(x.a,{children:Object(I.jsx)(x.a.Field,{children:Object(I.jsxs)(f.a,{fluid:!0,ref:k,entrynumber:a,defaultValue:"".concat(Y.value[n]," "),onChange:Ke,labelPosition:"right",type:"text",action:!0,children:[Object(I.jsx)("input",{}),o,Object(I.jsx)(g.a,{basic:!0,type:"reset",entrynumber:a,onClick:Qe,children:"Reset"})]})})})});i="",Y.message_built[n]&&(i=Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(v.a,{trigger:Object(I.jsx)(u.a,{color:"blue",name:"warning sign"}),content:"Only available if Squid is compiled with the ".concat(Y.message_built[n])})})),r="",Y.message_warning[n]&&(r=Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(v.a,{trigger:Object(I.jsx)(u.a,{color:"pink",name:"warning sign"}),content:Y.message_warning[n]})}));var _=!1;Y.is_enabled[n]>0&&(_=!0),b[n]=Object(I.jsxs)(m.a.Row,{active:P===n,children:[Object(I.jsx)(m.a.Cell,{width:1,children:Object(I.jsx)(w.a,{value:a,id:"checkboxEntry".concat(a+=1),defaultChecked:_,slider:!0,onClick:Ue})}),Object(I.jsx)(m.a.Cell,{children:h}),Object(I.jsxs)(m.a.Cell,{width:2,children:[i,r]}),Object(I.jsx)(m.a.Cell,{width:1,align:"left",children:Object(I.jsx)(g.a,{value:a,compact:!0,circular:!0,active:Se,onClick:Ve,icon:"help"})})]},"tableKey".concat(n)),n+=1}e[j]=Object(I.jsxs)(C.a,{children:[Object(I.jsxs)(y.a.Title,{active:c===j,index:j,onClick:De,children:[Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(v.a,{trigger:Object(I.jsx)(u.a,{name:"dropdown"}),size:"tiny",position:"left center",header:"Tags in this section:",content:Object(I.jsx)(S.a,{centered:!0,columns:1,children:Object(I.jsx)(S.a.Column,{textAlign:"left",children:Object(I.jsx)("pre",{children:d[j]})})})})}),Object(I.jsx)(u.a,{name:"tags",color:l[j]}),"\xa0",Y.all_sections[j]]}),Object(I.jsx)(y.a.Content,{active:c===j,children:Object(I.jsx)(m.a,{striped:!0,compact:!0,basic:"very",children:Object(I.jsx)(m.a.Body,{children:b})})})]},"containerKey".concat(j))}return e}()})})})}),Object(I.jsx)(S.a.Column,{widescreen:6,computer:7,children:Object(I.jsx)(R.a,{context:me,children:Object(I.jsxs)(_.a,{basic:!0,size:"small",children:[Object(I.jsx)("p",{}),Object(I.jsx)(d.a,{children:dt}),Object(I.jsx)("pre",{children:bt})]})})})]}),et(fe,"copy","New configuration",Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a.Content,{scrolling:!0,children:Object(I.jsx)(x.a,{children:Object(I.jsxs)(x.a.Field,{children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("b",{children:"To use:"})," copy configuration from the text area below and save it as squid.conf in the location of the original configuration file. By default, this file is located at"," ",Object(I.jsx)("b",{children:"/etc/squid/squid.conf"})," or"," ",Object(I.jsx)("b",{children:"/usr/local/squid/etc/squid.conf"}),"."]}),Object(I.jsx)(F.a,{rows:20,value:function(){for(var e="",t=0;t<Y.section_number.length;t+=1)Y.is_enabled[t]&&(e="".concat(e,"\n").concat(Y.value[t]));return e}()})]})})}),Object(I.jsx)(b.a.Actions,{children:Object(I.jsx)(g.a,{negative:!0,size:"large",onClick:Xe,children:"close"})})]})),et(V,"edit",(function(){return Y.tags[Fe]}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a.Content,{scrolling:!0,children:Object(I.jsx)(x.a,{children:Object(I.jsx)(x.a.Field,{children:Object(I.jsx)(F.a,{rows:20,defaultValue:Y.value[Fe],onChange:function(e){Y.value[Fe]=e.target.value}})})})}),Object(I.jsxs)(b.a.Actions,{children:[Object(I.jsx)(g.a,{type:"reset",secondary:!0,children:"Revert to default"}),Object(I.jsx)(g.a,{secondary:!0,onClick:Me,children:"Save and close"})]})]})),et(X,"paste","Import existing configuration",Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(b.a.Content,{scrolling:!0,children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("b",{children:"To import:"})," copy and paste contents of ",Object(I.jsx)("b",{children:"squid.conf"})," ","into the window below. By default, this file is located at"," ",Object(I.jsx)("b",{children:"/etc/squid/squid.conf"})," or"," ",Object(I.jsx)("b",{children:"/usr/local/squid/etc/squid.conf"}),"."]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("b",{children:"Please note:"})," lines that begin with '#' (i.e. commented out) are not going to be processed."]}),Object(I.jsx)(x.a,{children:Object(I.jsx)(x.a.TextArea,{control:"textarea",onChange:function(e){Ee(e.target.value)}})})]}),Object(I.jsxs)(b.a.Actions,{children:[Object(I.jsx)(g.a,{secondary:!0,onClick:Ge,children:"Close"}),Object(I.jsx)(g.a,{secondary:!0,type:"submit",method:"post",onClick:function(){fetch("http://localhost:3000/import",{method:"POST",body:Ae,headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Accept"}}).then(ce(!1)).then((function(e){return e.json()})).then((function(e){var t,c="",n=0,s=0;for(s=0;s<e.id.length;s+=1)Y.is_enabled[s]=0;for(s=0;s<e.id.length;s+=1){var a=e.id[s];999===e.id[s]?c="".concat(c," ").concat(e.tags[s],";"):(Y.is_enabled[a]=1,Y.value[a]=e.value[s],Y.switchable[a]=e.switchable[s],Y.switch_position[a]=e.switch_position[s],n+=1)}""!==c&&(c=" The following entries were skipped as they are not being present in current version:".concat(c)),t="Import completed: ".concat(e.id.length," entries processed, ").concat(n," recognized.").concat(c),K(!1),ie(t),ce(!0)}))},children:"Import"})]})]})),Object(I.jsxs)(k.a,{inverted:!0,active:Se,onClickOutside:Je,page:!0,children:[Object(I.jsxs)(d.a,{as:"h1",color:Ze,children:[Object(I.jsx)(u.a,{name:"circle outline",color:Ze}),"Sucker"]}),Object(I.jsxs)(d.a,{as:"h2",color:Ye,children:["version ","0.3"]}),Object(I.jsxs)(d.a,{color:Ye,children:[Object(I.jsxs)("p",{children:["configuration editor for"," ",Object(I.jsx)("a",{href:"http://www.squid-cache.org/",children:"Squid"})," caching proxy"]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(u.a,{name:"github"}),"Github:"," ",Object(I.jsx)("a",{href:"https://github.com/itworks99/sucker",children:"itworks99/sucker"})]}),Object(I.jsx)("p",{children:"Built with Bottle, Gunicorn, Python, React and Semantic-UI"}),Object(I.jsxs)("p",{children:["Created in Sydney with ",Object(I.jsx)(u.a,{color:"pink",name:"heart"})]})]})]}),et(ue,"question","Confirm reload of the Squid base configuration file",Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a.Content,{children:"This action will reload base configuration file with the version requested. Please note that any unsaved changes are going to be lost. Do you want to proceed?"}),Object(I.jsxs)(b.a.Actions,{children:[Object(I.jsx)(g.a,{negative:!0,onClick:function(){he(!1)},children:"no"}),Object(I.jsx)(g.a,{positive:!0,children:"yes"})]})]}))]})}return jt}var H=document.getElementById("root");i.a.render(Object(I.jsx)(P,{}),H)}},[[162,1,2]]]);
//# sourceMappingURL=main.de1871ac.chunk.js.map