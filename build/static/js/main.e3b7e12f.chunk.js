(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,t,a){e.exports=a(403)},403:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(55),i=a.n(o),r=(a(239),a(197)),c=a(198),s=a(222),u=a(199),d=a(223),m=a(17),h=a(97),p=a.n(h),f=a(432),E=a(196),g=a(428),v=a(426),b=a(420),C=a(419),w=a(423),y=a(195),S=a(412),O=a(425),k=a(422),I=a(421),x=a(413),j=a(415),T=a(424),_=a(429),R=a(431),q=a(416),L=a(430),M=a(427),P=a(417),J=a(418),N=a(414),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a.importConfiguration=function(){var e=a.state.dataJSON;fetch("http://localhost:8080/import",{method:"POST",body:a.configurationToImport,headers:{"Access-Control-Allow-Origin":"http://localhost:8080","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Accept"}}).then(a.setState({isLoaded:!1})).then(function(e){return e.json()}).then(function(t){a.setState({importedDataJSON:t,importCompleted:!0});for(var n,l="",o=0,i=0;i<t.id.length;i++)e.is_enabled[i]=0;for(i=0;i<t.id.length;i++){var r=t.id[i];999===t.id[i]?l=l+" "+t.tags[i]+";":(e.is_enabled[r]=1,e.value[r]=t.value[i],e.switchable[r]=t.switchable[i],e.switch_position[r]=t.switch_position[i],o++)}""!==l&&(l=" The following entries were skipped as they are not being present in current version:"+l),n="Import completed: "+t.id.length+" entries processed, "+o+" recognized."+l,a.setState({openImportWindow:!1,statusMessage:n,isLoaded:!0})})},a.closeConfigShow=function(e,t){return function(){a.setState({closeOnEscape:e,closeOnDimmerClick:t,open:!0})}},a.confirm=function(){return a.setState({confirm:!0})},a.confirmClose=function(){return a.setState({confirm:!1})},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a.handleContextRef=function(e){return a.setState({contextRef:e})},a.handleOpen=function(){return a.setState({active:!0})},a.handleClose=function(){return a.setState({active:!1})},a.handleEditorClose=function(){return a.setState({openEditor:!1})},a.handleConfigPreview=function(){return a.setState({open:!0})},a.handleHideClick=function(){return a.setState({visible:!1})},a.resetComponent=function(){return a.setState({isLoading:!1,results:[],value:""})},a.handleClick=function(e,t){var n=t.index,l=a.state.activeIndex===n?-1:n;a.setState({activeIndex:l}),a.setState({helpEntryId:0})},a.handleHelpButtonClick=function(e){a.setState({helpEntryId:e.target.value}),a.setState({helpTextIsVisible:!0})},a.handleEntrySliderClick=function(e){var t=a.state.dataJSON;t.is_enabled[e.target.value]=!t.is_enabled[e.target.value]},a.readValueFromComponent=function(e,t){var n=t.entrynumber,l=t.value;a.state.dataJSON.value[n]=l},a.readConfigurationToImport=function(e){a.configurationToImport=e.target.value},a.handleMultilineEdit=function(e){a.state.dataJSON.value[a.multilineEntryId]=e.target.value},a.displayMultilineEditor=function(e,t){var n=t.value;a.multilineEntryId=n,a.setState(function(e){return{openEditor:!e.openEditor}})},a.handleImportWindow=function(){a.setState({openImportWindow:!a.state.openImportWindow})},a.focusOnComponent=function(e,t){var n=t.entrynumber;a.componentRef[n].current.focus()},a.focusTextInput=function(e,t){var n=t.result,l=a.state.dataJSON,o=n.record;a.setState(function(){return{activeIndex:l.section_number[o]}}),a.setState(function(){return{activeRowIndex:o}}),1!==l.switchable[o]&&a.componentRef[o].current.focus()},a.handleSearchChange=function(e,t){var n=t.value;function l(){var e=1;return e+1}var o=a.state.dataJSON,i=p.a.times(o.tags.length,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return{title:a.state.dataJSON.tags[e],record:e}});a.setState({isLoading:!0,value:n}),setTimeout(function(){if(a.state.value.length<1)return a.resetComponent();var e=new RegExp(p.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:p.a.filter(i,function(t){return e.test(t.title)})})},300)},a.state={value:""},a.state={activeIndex:0},a.state={activeRowIndex:0},a.state={visible:!1},a.state={helpEntryId:0},a.state={confirm:!1},a.state={openEditor:!1},a.state={openImportWindow:!1},a.state={dataJSON:""},a.state={isLoaded:!1},a.state={configurationToImport:""},a.state={statusMessage:""},a.componentRef=[],a.handleClick=a.handleClick.bind(Object(m.a)(Object(m.a)(a))),a.handleConfigPreview=a.handleConfigPreview.bind(Object(m.a)(Object(m.a)(a))),a.handleMultilineEdit=a.handleMultilineEdit.bind(Object(m.a)(Object(m.a)(a))),a.handleHelpButtonClick=a.handleHelpButtonClick.bind(Object(m.a)(Object(m.a)(a))),a.handleEntrySliderClick=a.handleEntrySliderClick.bind(Object(m.a)(Object(m.a)(a))),a.readValueFromComponent=a.readValueFromComponent.bind(Object(m.a)(Object(m.a)(a))),a.displayMultilineEditor=a.displayMultilineEditor.bind(Object(m.a)(Object(m.a)(a))),a.handleImportWindow=a.handleImportWindow.bind(Object(m.a)(Object(m.a)(a))),a.readConfigurationToImport=a.readConfigurationToImport.bind(Object(m.a)(Object(m.a)(a))),a.importConfiguration=a.importConfiguration.bind(Object(m.a)(Object(m.a)(a))),a.focusOnComponent=a.focusOnComponent.bind(Object(m.a)(Object(m.a)(a))),a.AccordeonIconColors={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8080/json").then(function(e){return e.json()}).then(function(t){e.setState({dataJSON:t,isLoaded:!0})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"warningIconPopup",value:function(e,t){return l.a.createElement(f.a,{trigger:l.a.createElement(E.a,{color:e,name:"warning sign"}),content:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeIndex,n=t.activeRowIndex,o=t.active,i=t.openEditor,r=t.open,c=t.openImportWindow,s=t.dataJSON,u=t.isLoaded,d=t.error,m=t.contextRef,h=t.isLoading,p=t.value,W=t.results,F=t.statusMessage,A=this.handleClick,B=this.handleHelpButtonClick,H=this.handleEntrySliderClick,z=this.readValueFromComponent,V=this.displayMultilineEditor,D=this.warningIconPopup,G=this.componentRef,K=this.focusOnComponent,U="grey",X="purple",$="pink",Q=function(e){var t=e.title,a=e.record;return l.a.createElement(g.a,{key:a,size:"tiny",content:t,subheader:s.all_sections[s.section_number[a]].toLowerCase()})},Y=function(t,a,n,o){return l.a.createElement(b.a,{dimmer:"inverted",open:t,closeOnEscape:e.closeOnEscape,onClose:e.close},l.a.createElement(g.a,{icon:a,content:n}),l.a.createElement(b.a.Content,{scrolling:!0},l.a.createElement(C.a,null,o)))};return d?l.a.createElement("div",null,"Error: ",d.message):u?l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,null,l.a.createElement(M.a,{fixed:"top",inverted:!0,fitted:"vertically",color:"black"},l.a.createElement(j.a,null,l.a.createElement(M.a.Item,{as:"a",header:!0,onClick:this.handleOpen},l.a.createElement(g.a,{as:"h3",inverted:!0},l.a.createElement(E.a,{inverted:!0,name:"circle outline",color:X,size:"big"}),l.a.createElement(g.a.Content,null,"Sucker",l.a.createElement(g.a.Subheader,null,"Squid configuration editor")))),l.a.createElement(M.a.Item,{as:"a"},l.a.createElement(v.a,Object.assign({placeholder:"Search tags",minCharacters:3,loading:h,onResultSelect:e.focusTextInput,onSearchChange:e.handleSearchChange,resultRenderer:Q,results:W,value:p},e.props))),l.a.createElement(M.a.Item,{as:"a",onClick:this.handleConfigPreview},l.a.createElement(g.a,{as:"h4",inverted:!0},l.a.createElement(E.a,{inverted:!0,name:"magic"}),"Show")),l.a.createElement(M.a.Item,{as:"a",onClick:this.handleImportWindow},l.a.createElement(g.a,{as:"h4",inverted:!0},l.a.createElement(E.a,{inverted:!0,name:"download"}),"Import"))))),l.a.createElement(P.a,null),l.a.createElement(_.a,{centered:!0,columns:3},l.a.createElement(_.a.Column,{widescreen:5,computer:2},l.a.createElement(w.a,null,l.a.createElement("p",null,"Loaded configuration for Squid ver. ",s.squid_version[0]),l.a.createElement("p",null,s.tags.length," unique tags in ",s.all_sections.length," ","sections"),l.a.createElement("p",null,F))),l.a.createElement(_.a.Column,{widescreen:6,computer:7},l.a.createElement("div",{ref:this.handleContextRef},l.a.createElement(j.a,null,l.a.createElement(T.a,{styled:!0,fluid:!0},function(){for(var e=[],t=0,i=0,r=1e3,c="",u="",d="",m=[],h=0;h<s.all_sections.length;h++){var p=[],g=[];for(p[h]="";s.section_number[t]===h;){s.is_enabled[t]>0&&(m[h]=X);var v="";if(p[h]+=s.tags[t]+"\n",G[t]=l.a.createRef(),s.switchable[t])if(1===s.switchable[t]){var b=[{key:"off",text:s.tags[t]+" off",value:s.tags[t]+" off"},{key:"on",text:s.tags[t]+" on",value:s.tags[t]+" on"}];v=l.a.createElement(k.a,{ref:G[t],entrynumber:i,fluid:!0,selection:!0,options:b,defaultValue:b[s.switch_position[t]].value,onChange:z})}else 2===s.switchable[t]&&(v=l.a.createElement(O.a,{ref:G[t],secondary:!0,compact:!0,value:t,onClick:V},s.tags[t]," - Click to edit"));else d=s.units[t]?l.a.createElement(y.a,{basic:!0,content:s.units[t],horizontal:!0}):"",v=l.a.createElement(C.a.Field,null,l.a.createElement(S.a,{fluid:!0,ref:G[t],entrynumber:i,defaultValue:s.value[t]+" ",onChange:z,labelPosition:"right",type:"text",action:!0},l.a.createElement("input",null),d,l.a.createElement(O.a,{basic:!0,type:"reset",entrynumber:i,onClick:K},"Reset")));c=s.message_built[t]?D(X,"Only available if Squid is compiled with the "+s.message_built[t]):"",u=s.message_warning[t]?D($,s.message_warning[t]):"",g[t]=l.a.createElement(I.a.Row,{key:"tableKey"+t,active:n===t},l.a.createElement(I.a.Cell,{width:1},l.a.createElement(x.a,{value:i,id:"checkboxEntry"+i++,defaultChecked:s.is_enabled[t],slider:!0,onClick:H})),l.a.createElement(I.a.Cell,null,l.a.createElement(C.a,null,v)),l.a.createElement(I.a.Cell,{width:2},c,u),l.a.createElement(I.a.Cell,{width:1,allign:"left"},l.a.createElement(O.a,{value:r++,compact:!0,basic:!0,color:U,active:o,onClick:B},"Help"))),t++}e[h]=l.a.createElement(j.a,{key:"containerKey"+h},l.a.createElement(T.a.Title,{active:a===h,index:h,onClick:A},l.a.createElement(f.a,{trigger:l.a.createElement(E.a,{name:"dropdown"}),size:"tiny",position:"left center",header:"Tags in this section:",content:l.a.createElement(_.a,{centered:!0,columns:1},l.a.createElement(_.a.Column,{textAlign:"left"},l.a.createElement("pre",null,p[h])))}),l.a.createElement(E.a,{name:"tags",color:m[h]}),"\xa0",s.all_sections[h]),l.a.createElement(T.a.Content,{active:a===h},l.a.createElement(I.a,{striped:!0,compact:!0,basic:"very"},l.a.createElement(I.a.Body,null,g))))}return e}())))),l.a.createElement(_.a.Column,{widescreen:5,computer:7},l.a.createElement(J.a,{context:m,offset:75},l.a.createElement(L.a,{basic:!0,size:"small"},l.a.createElement(g.a,{content:s.tags[this.state.helpEntryId-1e3]}),l.a.createElement("pre",null,s.help[this.state.helpEntryId-1e3]))))),Y(r,"copy","New configuration",l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a.Field,null,l.a.createElement("p",null,l.a.createElement("b",null,"To use:")," copy configuration from the text area below and save it as squid.conf in the location of the original configuration file. By default, this file is located at"," ",l.a.createElement("b",null,"/etc/squid/squid.conf")," or"," ",l.a.createElement("b",null,"/usr/local/squid/etc/squid.conf"),"."),l.a.createElement(N.a,{autoHeight:!0,value:function(){for(var e="",t=0;t<s.section_number.length;t++)s.is_enabled[t]&&(e=e+"\n"+s.value[t]);return e}()})),l.a.createElement(O.a,{negative:!0,size:"large",onClick:this.close},"close"))),Y(i,"edit",s.tags[this.multilineEntryId],l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a.Field,null,l.a.createElement(N.a,{autoHeight:!0,defaultValue:s.value[this.multilineEntryId],onChange:this.handleMultilineEdit})),l.a.createElement(O.a,{type:"reset",secondary:!0},"Revert to default"),l.a.createElement(O.a,{secondary:!0,onClick:this.displayMultilineEditor},"Save and close"))),Y(c,"paste","Import existing configuration",l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"To import:")," copy and paste contents of ",l.a.createElement("b",null,"squid.conf")," ","into the window below. By default, this file is located at"," ",l.a.createElement("b",null,"/etc/squid/squid.conf")," or"," ",l.a.createElement("b",null,"/usr/local/squid/etc/squid.conf"),"."),l.a.createElement("p",null,l.a.createElement("b",null,"Please note:")," lines that begin with '#' (i.e. commented out) are not going to be processed."),l.a.createElement(C.a.TextArea,{control:"textarea",onChange:this.readConfigurationToImport}),l.a.createElement(O.a,{secondary:!0,onClick:this.handleImportWindow},"Close"),l.a.createElement(O.a,{secondary:!0,type:"submit",method:"post",onClick:this.importConfiguration},"Import"))),l.a.createElement(R.a,{inverted:!0,active:o,onClickOutside:this.handleClose,page:!0},l.a.createElement(g.a,{as:"h1",icon:!0,color:X},l.a.createElement(E.a,{name:"circle outline",color:X}),"Sucker",l.a.createElement(g.a.Subheader,null,"ver.0.1 (deep beta)")),l.a.createElement(g.a,{color:U},l.a.createElement("p",null,"configuration editor for"," ",l.a.createElement("a",{href:"http://www.squid-cache.org/"},"Squid")," caching proxy"),l.a.createElement("p",null,l.a.createElement(E.a,{name:"github"}),"Github:"," ",l.a.createElement("a",{href:"https://github.com/itworks99/sucker"},"itworks99/sucker")),l.a.createElement("p",null,"Built with Bottle, Python, React and Semantic-UI"),l.a.createElement("p",null,"Created in Sydney with ",l.a.createElement(E.a,{color:"pink",name:"heart"}))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{inverted:!0,active:!u},l.a.createElement(q.a,{inverted:!0,size:"massive"},"Loading")))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[234,2,1]]]);
//# sourceMappingURL=main.e3b7e12f.chunk.js.map