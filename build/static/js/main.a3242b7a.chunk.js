(this.webpackJsonpsucker=this.webpackJsonpsucker||[]).push([[0],{147:function(e,t,a){e.exports=a(159)},159:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(55),o=a.n(l),s=(a(152),a(117)),r=a.n(s),c=a(182),h=a(62),d=a(191),u=a(183),m=a(187),p=a(186),E=a(190),g=a(88),f=a(176),v=a(160),C=a(184),b=a(188),w=a(196),S=a(178),y=a(189),k=a(193),I=a(192),O=a(179),T=a(194),R=a(185),x=a(180),q=a(181),_=a(177);class F extends i.a.Component{constructor(e){super(e),this.state={},this.callLoadConfigurationFile=()=>{this.httpRequestMethod="OPTIONS",this.loadConfigurationFile()},this.importConfiguration=()=>{var e=this.state.dataJSON;fetch("http://localhost:3000/import",{method:"POST",body:this.configurationToImport,headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Accept"}}).then(this.setState({isLoaded:!1})).then(e=>e.json()).then(t=>{this.setState({importedDataJSON:t,importCompleted:!0});for(var a,n="",i=0,l=0;l<t.id.length;l++)e.is_enabled[l]=0;for(l=0;l<t.id.length;l++){var o=t.id[l];999===t.id[l]?n=n+" "+t.tags[l]+";":(e.is_enabled[o]=1,e.value[o]=t.value[l],e.switchable[o]=t.switchable[l],e.switch_position[o]=t.switch_position[l],i++)}""!==n&&(n=" The following entries were skipped as they are not being present in current version:"+n),a="Import completed: "+t.id.length+" entries processed, "+i+" recognized."+n,this.setState({openImportWindow:!1,statusMessage:a,isLoaded:!0})})},this.closeConfigShow=(e,t)=>()=>{this.setState({closeOnEscape:e,closeOnDimmerClick:t,open:!0})},this.confirm=()=>this.setState({confirm:!0}),this.confirmClose=()=>this.setState({confirm:!1}),this.open=()=>this.setState({open:!0}),this.close=()=>this.setState({open:!1}),this.handleContextRef=e=>this.setState({contextRef:e}),this.handleOpen=()=>this.setState({active:!0}),this.handleClose=()=>this.setState({active:!1}),this.handleEditorClose=()=>this.setState({openEditor:!1}),this.handleConfigPreview=()=>this.setState({open:!0}),this.handleHideClick=()=>this.setState({visible:!1}),this.resetComponent=()=>this.setState({isLoading:!1,results:[],value:""}),this.handleClick=(e,t)=>{var a=t.index,n=this.state.activeIndex===a?-1:a;this.setState({activeIndex:n}),this.setState({helpEntryId:0})},this.handleHelpButtonClick=e=>{this.setState({helpEntryId:e.target.value}),this.setState({helpTextIsVisible:!0})},this.handleEntrySliderClick=e=>{var t=this.state.dataJSON;t.is_enabled[e.target.value]=!t.is_enabled[e.target.value]},this.handleVersionDropdownClick=(e,{value:t})=>{this.version=t,this.setState({openReloadConfirmation:!0})},this.readValueFromComponent=(e,{entrynumber:t,value:a})=>{this.state.dataJSON.value[t]=a},this.readConfigurationToImport=e=>{this.configurationToImport=e.target.value},this.handleMultilineEdit=e=>{this.state.dataJSON.value[this.multilineEntryId]=e.target.value},this.displayMultilineEditor=(e,{value:t})=>{this.multilineEntryId=t,this.setState(e=>({openEditor:!e.openEditor}))},this.handleImportWindow=()=>{this.setState({openImportWindow:!this.state.openImportWindow})},this.closeReloadConfirmationWindow=()=>this.setState({openReloadConfirmation:!1}),this.focusOnComponent=(e,{entrynumber:t})=>{this.componentRef[t].current.focus()},this.focusTextInput=(e,{result:t})=>{var a=this.state.dataJSON,n=t.record;this.setState(()=>({activeIndex:a.section_number[n]})),this.setState(()=>({activeRowIndex:n})),1!==a.switchable[n]&&this.componentRef[n].current.focus()},this.handleSearchChange=(e,{value:t})=>{function a(){var e=1;return e+1}var n=this.state.dataJSON,i=r.a.times(n.tags.length,(e=a)=>({title:this.state.dataJSON.tags[e],record:e}));this.setState({isLoading:!0,value:t}),setTimeout(()=>{if(this.state.value.length<1)return this.resetComponent();var e=new RegExp(r.a.escapeRegExp(this.state.value),"i");this.setState({isLoading:!1,results:r.a.filter(i,t=>e.test(t.title))})},300)},this.state={value:""},this.state={activeIndex:0},this.state={activeRowIndex:0},this.state={visible:!1},this.state={helpEntryId:0},this.state={confirm:!1},this.state={openEditor:!1},this.state={openImportWindow:!1},this.state={dataJSON:""},this.state={isLoaded:!1},this.state={configurationToImport:""},this.state={statusMessage:""},this.state={version:""},this.state={openReloadConfirmation:!1},this.state={httpRequestMethod:""},this.state={closeOnEscape:!1},this.state={closeOnDimmerClick:!1},this.componentRef=[],this.handleClick=this.handleClick.bind(this),this.handleConfigPreview=this.handleConfigPreview.bind(this),this.handleMultilineEdit=this.handleMultilineEdit.bind(this),this.handleHelpButtonClick=this.handleHelpButtonClick.bind(this),this.handleEntrySliderClick=this.handleEntrySliderClick.bind(this),this.readValueFromComponent=this.readValueFromComponent.bind(this),this.displayMultilineEditor=this.displayMultilineEditor.bind(this),this.handleImportWindow=this.handleImportWindow.bind(this),this.readConfigurationToImport=this.readConfigurationToImport.bind(this),this.importConfiguration=this.importConfiguration.bind(this),this.focusOnComponent=this.focusOnComponent.bind(this),this.AccordeonIconColors={},this.loadConfigurationFile=this.loadConfigurationFile.bind(this),this.callLoadConfigurationFile=this.callLoadConfigurationFile.bind(this)}componentDidMount(){this.httpRequestMethod="GET",this.loadConfigurationFile()}loadConfigurationFile(){this.setState({isLoaded:!1}),"GET"===this.httpRequestMethod?fetch("http://localhost:3000/json",{method:this.httpRequestMethod}).then(e=>e.json()).then(e=>{this.setState({dataJSON:e,isLoaded:!0})},e=>{this.setState({isLoaded:!0,error:e})}):(fetch("http://localhost:3000/version",{method:this.httpRequestMethod,headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Request-Headers":"X-Requested-With, Content-Type, Accept, access-control-allow-headers, X-CSRF-Token, access-control-allow-methods, access-control-allow-origin"},body:JSON.stringify({version:this.version})}).then(e=>e.json()).then(e=>{this.setState({dataJSON:e,isLoaded:!0})},e=>{this.setState({isLoaded:!0,error:e})}),this.setState({openReloadConfirmation:!1}))}warningIconPopup(e,t){return i.a.createElement(c.a,{trigger:i.a.createElement(h.a,{color:e,name:"warning sign"}),content:t})}render(){var e=this.state,t=e.activeIndex,a=e.activeRowIndex,n=e.active,l=e.openEditor,o=e.open,s=e.openImportWindow,r=e.closeOnEscape,F=e.dataJSON,L=e.isLoaded,M=e.error,P=e.contextRef,A=e.isLoading,N=e.value,W=e.results,J=e.statusMessage,H=e.openReloadConfirmation,B=this.handleClick,V=this.handleHelpButtonClick,z=this.handleEntrySliderClick,D=this.readValueFromComponent,j=this.displayMultilineEditor,G=this.warningIconPopup,U=this.componentRef,X=this.focusOnComponent,K=({title:e,record:t})=>i.a.createElement(d.a,{key:t,size:"tiny",content:e,subheader:F.all_sections[F.section_number[t]].toLowerCase()}),$=(e,t,a,n)=>i.a.createElement(m.a,{dimmer:"inverted",open:e,closeOnEscape:r,onClose:this.close},i.a.createElement(d.a,{icon:t,content:a}),i.a.createElement(m.a.Content,{scrolling:!0},i.a.createElement(p.a,null,n)));return M?i.a.createElement("div",null,"Error: ",M.message):L?i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,null,i.a.createElement(R.a,{fixed:"top",inverted:!0,fitted:"vertically",color:"black"},i.a.createElement(S.a,null,i.a.createElement(R.a.Item,{as:"a",header:!0,onClick:this.handleOpen},i.a.createElement(d.a,{as:"h3",inverted:!0},i.a.createElement(h.a,{inverted:!0,name:"circle outline",color:"purple",size:"big"}),i.a.createElement(d.a.Content,null,"Sucker",i.a.createElement(d.a.Subheader,null,"Squid configuration editor")))),i.a.createElement(R.a.Item,{as:"a"},(()=>i.a.createElement(u.a,Object.assign({placeholder:"Search tags",minCharacters:3,loading:A,onResultSelect:this.focusTextInput,onSearchChange:this.handleSearchChange,resultRenderer:K,results:W,value:N},this.props)))()),i.a.createElement(R.a.Item,null,i.a.createElement(d.a,{as:"h5",inverted:!0},"Squid version"," ",i.a.createElement(C.a,{options:function(){for(var e=[],t=0;t<F.available_versions.length;t++)e.push({key:t,text:F.available_versions[t],value:F.available_versions[t]});return e}(),inline:!0,defaultValue:F.squid_version[0],onChange:this.handleVersionDropdownClick}))),i.a.createElement(R.a.Item,{as:"a",onClick:this.handleConfigPreview},i.a.createElement(d.a,{as:"h5",inverted:!0},i.a.createElement(h.a,{inverted:!0,name:"magic",size:"large"}),"Show")),i.a.createElement(R.a.Item,{as:"a",onClick:this.handleImportWindow},i.a.createElement(d.a,{as:"h5",inverted:!0},i.a.createElement(h.a,{inverted:!0,name:"download",size:"large"}),"Import"))))),i.a.createElement(x.a,null),i.a.createElement(k.a,{centered:!0,columns:3},i.a.createElement(k.a.Column,{widescreen:5,computer:2},i.a.createElement(E.a,null,i.a.createElement("p",null,"Loaded configuration for Squid ver."," ",i.a.createElement("b",null,F.squid_version[0])),i.a.createElement("p",null,i.a.createElement("b",null,F.tags.length)," unique tags in"," ",i.a.createElement("b",null,F.all_sections.length)," sections"),i.a.createElement("p",null,J))),i.a.createElement(k.a.Column,{widescreen:6,computer:7},i.a.createElement("div",{ref:this.handleContextRef},i.a.createElement(S.a,null,i.a.createElement(y.a,{styled:!0,fluid:!0},function(){for(var e=[],l=0,o=0,s=1e3,r="",d="",u="",m=[],E=0;E<F.all_sections.length;E++){var I=[],O=[];for(I[E]="";F.section_number[l]===E;){F.is_enabled[l]>0&&(m[E]="purple");var T="";if(I[E]+=F.tags[l]+"\n",U[l]=i.a.createRef(),F.switchable[l])if(1===F.switchable[l]){var R=[{key:"off",text:F.tags[l]+" off",value:F.tags[l]+" off"},{key:"on",text:F.tags[l]+" on",value:F.tags[l]+" on"}];T=i.a.createElement(C.a,{ref:U[l],entrynumber:o,fluid:!0,selection:!0,options:R,defaultValue:R[F.switch_position[l]].value,onChange:D})}else 2===F.switchable[l]&&(T=i.a.createElement(v.a,{ref:U[l],secondary:!0,compact:!0,value:l,onClick:j},F.tags[l]," - Click to edit"));else u=F.units[l]?i.a.createElement(g.a,{basic:!0,content:F.units[l],horizontal:!0}):"",T=i.a.createElement(p.a.Field,null,i.a.createElement(f.a,{fluid:!0,ref:U[l],entrynumber:o,defaultValue:F.value[l]+" ",onChange:D,labelPosition:"right",type:"text",action:!0},i.a.createElement("input",null),u,i.a.createElement(v.a,{basic:!0,type:"reset",entrynumber:o,onClick:X},"Reset")));r=F.message_built[l]?G("purple","Only available if Squid is compiled with the "+F.message_built[l]):"",d=F.message_warning[l]?G("pink",F.message_warning[l]):"";var x=!1;F.is_enabled[l]>0&&(x=!0),O[l]=i.a.createElement(b.a.Row,{key:"tableKey"+l,active:a===l},i.a.createElement(b.a.Cell,{width:1},i.a.createElement(w.a,{value:o,id:"checkboxEntry"+o++,defaultChecked:x,slider:!0,onClick:z})),i.a.createElement(b.a.Cell,null,i.a.createElement(p.a,null,T)),i.a.createElement(b.a.Cell,{width:2},r,d),i.a.createElement(b.a.Cell,{width:1,allign:"left"},i.a.createElement(v.a,{value:s++,compact:!0,basic:!0,color:"grey",active:n,onClick:V},"Help"))),l++}e[E]=i.a.createElement(S.a,{key:"containerKey"+E},i.a.createElement(y.a.Title,{active:t===E,index:E,onClick:B},i.a.createElement(c.a,{trigger:i.a.createElement(h.a,{name:"dropdown"}),size:"tiny",position:"left center",header:"Tags in this section:",content:i.a.createElement(k.a,{centered:!0,columns:1},i.a.createElement(k.a.Column,{textAlign:"left"},i.a.createElement("pre",null,I[E])))}),i.a.createElement(h.a,{name:"tags",color:m[E]}),"\xa0",F.all_sections[E]),i.a.createElement(y.a.Content,{active:t===E},i.a.createElement(b.a,{striped:!0,compact:!0,basic:"very"},i.a.createElement(b.a.Body,null,O))))}return e}())))),i.a.createElement(k.a.Column,{widescreen:5,computer:7},i.a.createElement(q.a,{context:P,offset:75},i.a.createElement(T.a,{basic:!0,size:"small"},i.a.createElement(d.a,{content:F.tags[this.state.helpEntryId-1e3]}),i.a.createElement("pre",null,F.help[this.state.helpEntryId-1e3]))))),$(o,"copy","New configuration",i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a.Field,null,i.a.createElement("p",null,i.a.createElement("b",null,"To use:")," copy configuration from the text area below and save it as squid.conf in the location of the original configuration file. By default, this file is located at"," ",i.a.createElement("b",null,"/etc/squid/squid.conf")," or"," ",i.a.createElement("b",null,"/usr/local/squid/etc/squid.conf"),"."),i.a.createElement(_.a,{autoHeight:!0,value:function(){for(var e="",t=0;t<F.section_number.length;t++)F.is_enabled[t]&&(e=e+"\n"+F.value[t]);return e}()})),i.a.createElement(v.a,{negative:!0,size:"large",onClick:this.close},"close"))),$(l,"edit",F.tags[this.multilineEntryId],i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a.Field,null,i.a.createElement(_.a,{autoHeight:!0,defaultValue:F.value[this.multilineEntryId],onChange:this.handleMultilineEdit})),i.a.createElement(v.a,{type:"reset",secondary:!0},"Revert to default"),i.a.createElement(v.a,{secondary:!0,onClick:this.displayMultilineEditor},"Save and close"))),$(s,"paste","Import existing configuration",i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("b",null,"To import:")," copy and paste contents of ",i.a.createElement("b",null,"squid.conf")," ","into the window below. By default, this file is located at"," ",i.a.createElement("b",null,"/etc/squid/squid.conf")," or"," ",i.a.createElement("b",null,"/usr/local/squid/etc/squid.conf"),"."),i.a.createElement("p",null,i.a.createElement("b",null,"Please note:")," lines that begin with '#' (i.e. commented out) are not going to be processed."),i.a.createElement(p.a.TextArea,{control:"textarea",onChange:this.readConfigurationToImport}),i.a.createElement(v.a,{secondary:!0,onClick:this.handleImportWindow},"Close"),i.a.createElement(v.a,{secondary:!0,type:"submit",method:"post",onClick:this.importConfiguration},"Import"))),i.a.createElement(I.a,{inverted:!0,active:n,onClickOutside:this.handleClose,page:!0},i.a.createElement(d.a,{as:"h1",icon:!0,color:"purple"},i.a.createElement(h.a,{name:"circle outline",color:"purple"}),"Sucker",i.a.createElement(d.a.Subheader,null,"ver.0.2a")),i.a.createElement(d.a,{color:"grey"},i.a.createElement("p",null,"configuration editor for"," ",i.a.createElement("a",{href:"http://www.squid-cache.org/"},"Squid")," caching proxy"),i.a.createElement("p",null,i.a.createElement(h.a,{name:"github"}),"Github:"," ",i.a.createElement("a",{href:"https://github.com/itworks99/sucker"},"itworks99/sucker")),i.a.createElement("p",null,"Built with Bottle, Gunicorn, Python, React and Semantic-UI"),i.a.createElement("p",null,"Created in Sydney with ",i.a.createElement(h.a,{color:"pink",name:"heart"})))),$(H,"question","Confirm reload of the Squid base configuration file",i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"This action will reload base configuration file with the version requested. Plese note that any unsaved changes are going to be lost. Do you want to proceed?"),i.a.createElement(v.a,{negative:!0,onClick:this.closeReloadConfirmationWindow},"no"),i.a.createElement(v.a,{positive:!0,onClick:this.callLoadConfigurationFile},"yes")))):i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{inverted:!0,active:!L},i.a.createElement(O.a,{inverted:!0,size:"massive"},"Loading")))}}var L=F;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.a3242b7a.chunk.js.map