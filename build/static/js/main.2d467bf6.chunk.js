(this.webpackJsonpsucker=this.webpackJsonpsucker||[]).push([[0],{160:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(57),i=c.n(a),r=(c(152),c(93)),o=c(20),l=c(192),j=c(188),d=c(64),b=c(191),u=c(90),h=c(187),O=c(177),x=c(161),f=c(185),g=c(183),v=c(189),p=c(197),m=c(179),w=c(190),C=c(194),y=c(193),S=c(180),k=c(195),T=c(186),_=c(184),A=c(181),E=c(182),q=c(178),R=c(2);function F(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),F=Object(o.a)(i,2),I=F[0],P=F[1],H=Object(n.useState)(0),N=Object(o.a)(H,2),z=N[0],L=N[1],B=Object(n.useState)(!1),G=Object(o.a)(B,2),U=G[0],V=G[1],D=Object(n.useState)(!1),J=Object(o.a)(D,2),W=J[0],X=J[1],K=Object(n.useState)(""),M=Object(o.a)(K,2),Q=M[0],Y=M[1],$=Object(n.useState)(!1),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ce=Object(n.useState)(""),ne=Object(o.a)(ce,2),se=ne[0],ae=ne[1],ie=Object(n.useState)(""),re=Object(o.a)(ie,2),oe=re[0],le=re[1],je=Object(n.useState)(!1),de=Object(o.a)(je,2),be=de[0],ue=de[1],he=Object(n.useState)(!1),Oe=Object(o.a)(he,2),xe=Oe[0],fe=Oe[1],ge=Object(n.useState)(),ve=Object(o.a)(ge,2),pe=ve[0],me=ve[1],we=Object(n.useState)(),Ce=Object(o.a)(we,2),ye=Ce[0],Se=Ce[1],ke=Object(n.useState)(),Te=Object(o.a)(ke,2),_e=Te[0],Ae=Te[1],Ee=Object(n.useState)(),qe=Object(o.a)(Ee,2),Re=qe[0],Fe=qe[1],Ie=Object(n.useState)(),Pe=Object(o.a)(Ie,2),He=Pe[0],Ne=Pe[1],ze=[],Le=[];function Be(){X(!W)}function Ge(e){Q.is_enabled[e.target.value]=!Q.is_enabled[e.target.value]}function Ue(e,t){L(t.value)}var Ve=function(e,t){var n=t.index;a(c===n?-1:n)};function De(){Se(!ye)}function Je(e){me(e)}function We(){fe(!1)}function Xe(e,t){var c=t.entrynumber,n=t.value;Q.value[c]=n}function Ke(e){Fe(e.target.value),V(!U)}function Me(e,t){var c=t.entrynumber;ze[c].current.focus()}Object(n.useEffect)((function(){function e(e,t){var c;return t.endsWith("version")&&(c=JSON.stringify({version:oe})),fetch(t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Request-Headers":"X-Requested-With, Content-Type, Accept, access-control-allow-headers, X-CSRF-Token, access-control-allow-methods, access-control-allow-origin"},body:c}).then((function(e){return e.json()})).then((function(e){Y(e)})).then(te(!0),(function(e){Ne(e)})),ue(!1)}return""===oe?e("GET","http://localhost:3000/json"):e("OPTIONS","http://localhost:3000/version"),function(){te(!1)}}),[oe]);var Qe="grey",Ye="purple",$e={loading:!1,results:[],value:""};var Ze=function(e,t,c,n){return Object(R.jsxs)(j.a,{dimmer:"inverted",open:e,closeOnEscape:!0,onClose:We,children:[Object(R.jsxs)(j.a.Header,{children:[Object(R.jsx)(d.a,{name:t}),Object(R.jsx)(R.Fragment,{children:c})]}),n]})};var et=s.a.useReducer((function(e,t){switch(t.type){case"CLEAN_QUERY":return $e;case"START_SEARCH":return Object(r.a)(Object(r.a)({},e),{},{loading:!0,value:t.query});case"FINISH_SEARCH":return Object(r.a)(Object(r.a)({},e),{},{loading:!1,results:t.results});default:throw new Error}}),$e),tt=Object(o.a)(et,2),ct=tt[0],nt=tt[1],st=ct.loading,at=ct.results,it=ct.value,rt=s.a.useRef(),ot=s.a.useCallback((function(e,t){clearTimeout(rt.current),nt({type:"START_SEARCH",query:t.value}),rt.current=setTimeout((function(){if(t.value.length<1)nt({type:"CLEAN_QUERY"});else{var e=new RegExp(t.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),c=Le.filter((function(t){return e.test(t.title)}));nt({type:"FINISH_SEARCH",results:c})}}),300)}),[Le]);if(s.a.useEffect((function(){return function(){clearTimeout(rt.current)}}),[]),s.a.useEffect((function(){}),[z]),He)return Object(R.jsxs)("div",{children:["Error: ",He.message]});var lt="";if(!1===ee||void 0===Q.tags)lt=Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(y.a,{inverted:!0,active:!ee,children:Object(R.jsx)(S.a,{inverted:!0,size:"massive",children:"Loading"})})});else{""===oe&&le(Q.squid_version[0]),Q.tags.forEach((function(e,t){return Le.push({title:"".concat(e),record:t})}));var jt=Q.tags[z-1],dt=Q.help[z-1];lt=Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(k.a,{children:Object(R.jsx)(T.a,{fixed:"top",inverted:!0,fitted:"vertically",children:Object(R.jsxs)(m.a,{children:[Object(R.jsx)(T.a.Item,{as:"a",header:!0,onClick:De,children:Object(R.jsxs)(l.a,{inverted:!0,as:"h3",children:[Object(R.jsx)(d.a,{inverted:!0,name:"circle outline",color:Ye,size:"big"}),Object(R.jsxs)(l.a.Content,{children:["Sucker ","0.3"]}),Object(R.jsx)(l.a.Subheader,{children:"Squid configuration editor"})]})}),Object(R.jsx)(T.a.Item,{as:"a",children:Object(R.jsx)(_.a,{placeholder:"Search tags",minCharacters:2,loading:st,onResultSelect:function(e,t){var c=t.result.record;a(Q.section_number[c]),P(c),1!==Q.switchable[c]&&ze[c].current.focus()},onSearchChange:ot,resultRenderer:function(e){var t=e.title,c=e.record,n=Object(R.jsx)(l.a.Subheader,{children:Q.all_sections[Q.section_number[c]].toLowerCase()});return Object(R.jsxs)(l.a,{size:"tiny",children:[t,n]},c)},results:at,value:it})}),Object(R.jsx)(T.a.Item,{children:Object(R.jsxs)(l.a,{inverted:!0,as:"h5",children:["Squid version"," ",Object(R.jsx)(f.a,{options:function(){for(var e=[],t=0;t<Q.available_versions.length;t+=1)e.push({key:t,text:Q.available_versions[t],value:Q.available_versions[t]});return e}(),inline:!0,defaultValue:oe,onChange:function(e){var t=e.target.innerText;le(t),ue(!0)}})]})}),Object(R.jsx)(T.a.Item,{as:"a",onClick:function(){fe(!0)},children:Object(R.jsxs)(l.a,{inverted:!0,as:"h5",children:[Object(R.jsx)(d.a,{name:"magic"}),"Show"]})}),Object(R.jsx)(T.a.Item,{as:"a",onClick:Be,children:Object(R.jsxs)(l.a,{inverted:!0,as:"h5",children:[Object(R.jsx)(d.a,{name:"download"}),"Import"]})})]})})}),Object(R.jsx)(A.a,{}),Object(R.jsxs)(C.a,{centered:!0,columns:3,children:[Object(R.jsx)(C.a.Column,{widescreen:4,computer:2,children:Object(R.jsxs)(b.a,{color:Qe,children:[Object(R.jsxs)("p",{children:["Loaded configuration for Squid ver. ",Object(R.jsx)("b",{children:oe})]}),Object(R.jsxs)("p",{children:[Object(R.jsx)("b",{children:Q.tags.length})," unique tags in"," ",Object(R.jsx)("b",{children:Q.all_sections.length})," sections"]}),Object(R.jsx)("p",{children:se}),Object(R.jsx)("p",{children:"Legend:"}),Object(R.jsxs)("p",{children:[Object(R.jsx)(d.a,{name:"tags"})," - selected section"]}),Object(R.jsxs)("p",{children:[Object(R.jsx)(d.a,{name:"tags",color:Qe})," - section without enabled options"]}),Object(R.jsxs)("p",{children:[Object(R.jsx)(d.a,{name:"tags",color:Ye})," - section with enabled options"]})]})}),Object(R.jsx)(C.a.Column,{widescreen:6,computer:7,children:Object(R.jsx)("div",{ref:function(){return Je},children:Object(R.jsx)(m.a,{children:Object(R.jsx)(w.a,{styled:!0,fluid:!0,children:function(){var e=[];function t(e,t){return Array.from(e,(function(e){return{key:"".concat(t," ").concat(e),text:"".concat(t," ").concat(e),value:"".concat(t," ").concat(e)}}))}if(Q)for(var n=0,a=0,i="",r="",o="",l=[],j=0;j<Q.all_sections.length;j+=1){var b=[],y=[];for(b[j]="";Q.section_number[n]===j;){Q.is_enabled[n]>0&&(l[j]=Ye);var S="";b[j]+="".concat(Q.tags[n],"\n"),ze[n]=s.a.createRef();var k=ze[n];if(Q.switchable[n])if(1===Q.switchable[n]){var T=t(["on","off"],Q.tags[n]);S=Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(f.a,{ref:k,entrynumber:a,fluid:!0,selection:!0,options:T,defaultValue:T[Q.switch_position[n]].value,onChange:Xe})})}else 2===Q.switchable[n]&&(S=Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(x.a,{ref:k,secondary:!0,compact:!0,value:n,onClick:Ke,children:[Q.tags[n]," - Click to edit"]})}));else o=Q.units[n]?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(u.a,{basic:!0,content:Q.units[n],horizontal:!0})}):"",S=Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(h.a,{children:Object(R.jsx)(h.a.Field,{children:Object(R.jsxs)(O.a,{fluid:!0,ref:k,entrynumber:a,defaultValue:"".concat(Q.value[n]," "),onChange:Xe,labelPosition:"right",type:"text",action:!0,children:[Object(R.jsx)("input",{}),o,Object(R.jsx)(x.a,{basic:!0,type:"reset",entrynumber:a,onClick:Me,children:"Reset"})]})})})});i="",Q.message_built[n]&&(i=Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(g.a,{trigger:Object(R.jsx)(d.a,{color:"blue",name:"warning sign"}),content:"Only available if Squid is compiled with the ".concat(Q.message_built[n])})})),r="",Q.message_warning[n]&&(r=Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(g.a,{trigger:Object(R.jsx)(d.a,{color:"pink",name:"warning sign"}),content:Q.message_warning[n]})}));var _=!1;Q.is_enabled[n]>0&&(_=!0),y[n]=Object(R.jsxs)(v.a.Row,{active:I===n,children:[Object(R.jsx)(v.a.Cell,{width:1,children:Object(R.jsx)(p.a,{value:a,id:"checkboxEntry".concat(a+=1),defaultChecked:_,slider:!0,onClick:Ge})}),Object(R.jsx)(v.a.Cell,{children:S}),Object(R.jsxs)(v.a.Cell,{width:2,children:[i,r]}),Object(R.jsx)(v.a.Cell,{width:1,align:"left",children:Object(R.jsx)(x.a,{value:a,compact:!0,circular:!0,active:ye,onClick:Ue,icon:"help"})})]},"tableKey".concat(n)),n+=1}e[j]=Object(R.jsxs)(m.a,{children:[Object(R.jsxs)(w.a.Title,{active:c===j,index:j,onClick:Ve,children:[Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(g.a,{trigger:Object(R.jsx)(d.a,{name:"dropdown"}),size:"tiny",position:"left center",header:"Tags in this section:",content:Object(R.jsx)(C.a,{centered:!0,columns:1,children:Object(R.jsx)(C.a.Column,{textAlign:"left",children:Object(R.jsx)("pre",{children:b[j]})})})})}),Object(R.jsx)(d.a,{name:"tags",color:l[j]}),"\xa0",Q.all_sections[j]]}),Object(R.jsx)(w.a.Content,{active:c===j,children:Object(R.jsx)(v.a,{striped:!0,compact:!0,basic:"very",children:Object(R.jsx)(v.a.Body,{children:y})})})]},"containerKey".concat(j))}return e}()})})})}),Object(R.jsx)(C.a.Column,{widescreen:6,computer:7,children:Object(R.jsx)(E.a,{context:pe,children:Object(R.jsxs)(k.a,{basic:!0,size:"small",children:[Object(R.jsx)("p",{}),Object(R.jsx)(l.a,{children:jt}),Object(R.jsx)("pre",{children:dt})]})})})]}),Ze(xe,"copy","New configuration",Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(j.a.Content,{scrolling:!0,children:Object(R.jsx)(h.a,{children:Object(R.jsxs)(h.a.Field,{children:[Object(R.jsxs)("p",{children:[Object(R.jsx)("b",{children:"To use:"})," copy configuration from the text area below and save it as squid.conf in the location of the original configuration file. By default, this file is located at"," ",Object(R.jsx)("b",{children:"/etc/squid/squid.conf"})," or"," ",Object(R.jsx)("b",{children:"/usr/local/squid/etc/squid.conf"}),"."]}),Object(R.jsx)(q.a,{rows:20,value:function(){for(var e="",t=0;t<Q.section_number.length;t+=1)Q.is_enabled[t]&&(e="".concat(e,"\n").concat(Q.value[t]));return e}()})]})})}),Object(R.jsx)(j.a.Actions,{children:Object(R.jsx)(x.a,{negative:!0,size:"large",onClick:We,children:"close"})})]})),Ze(U,"edit",(function(){return Q.tags[Re]}),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(j.a.Content,{scrolling:!0,children:Object(R.jsx)(h.a,{children:Object(R.jsx)(h.a.Field,{children:Object(R.jsx)(q.a,{rows:20,defaultValue:Q.value[Re],onChange:function(e){Q.value[Re]=e.target.value}})})})}),Object(R.jsxs)(j.a.Actions,{children:[Object(R.jsx)(x.a,{type:"reset",secondary:!0,children:"Revert to default"}),Object(R.jsx)(x.a,{secondary:!0,onClick:Ke,children:"Save and close"})]})]})),Ze(W,"paste","Import existing configuration",Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(j.a.Content,{scrolling:!0,children:[Object(R.jsxs)("p",{children:[Object(R.jsx)("b",{children:"To import:"})," copy and paste contents of ",Object(R.jsx)("b",{children:"squid.conf"})," ","into the window below. By default, this file is located at"," ",Object(R.jsx)("b",{children:"/etc/squid/squid.conf"})," or"," ",Object(R.jsx)("b",{children:"/usr/local/squid/etc/squid.conf"}),"."]}),Object(R.jsxs)("p",{children:[Object(R.jsx)("b",{children:"Please note:"})," lines that begin with '#' (i.e. commented out) are not going to be processed."]}),Object(R.jsx)(h.a,{children:Object(R.jsx)(h.a.TextArea,{control:"textarea",onChange:function(e){Ae(e.target.value)}})})]}),Object(R.jsxs)(j.a.Actions,{children:[Object(R.jsx)(x.a,{secondary:!0,onClick:Be,children:"Close"}),Object(R.jsx)(x.a,{secondary:!0,type:"submit",method:"post",onClick:function(){fetch("http://localhost:3000/import",{method:"POST",body:_e,headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Access-Control-Allow-Headers":"X-Requested-With, Content-Type, Accept"}}).then(te(!1)).then((function(e){return e.json()})).then((function(e){var t,c="",n=0,s=0;for(s=0;s<e.id.length;s+=1)Q.is_enabled[s]=0;for(s=0;s<e.id.length;s+=1){var a=e.id[s];999===e.id[s]?c="".concat(c," ").concat(e.tags[s],";"):(Q.is_enabled[a]=1,Q.value[a]=e.value[s],Q.switchable[a]=e.switchable[s],Q.switch_position[a]=e.switch_position[s],n+=1)}""!==c&&(c=" The following entries were skipped as they are not being present in current version:".concat(c)),t="Import completed: ".concat(e.id.length," entries processed, ").concat(n," recognized.").concat(c),X(!1),ae(t),te(!0)}))},children:"Import"})]})]})),Object(R.jsxs)(y.a,{inverted:!0,active:ye,onClickOutside:De,page:!0,children:[Object(R.jsxs)(l.a,{as:"h1",color:Ye,children:[Object(R.jsx)(d.a,{name:"circle outline",color:Ye}),"Sucker"]}),Object(R.jsxs)(l.a,{as:"h2",color:Qe,children:["version ","0.3"]}),Object(R.jsxs)(l.a,{color:Qe,children:[Object(R.jsxs)("p",{children:["configuration editor for"," ",Object(R.jsx)("a",{href:"http://www.squid-cache.org/",children:"Squid"})," caching proxy"]}),Object(R.jsxs)("p",{children:[Object(R.jsx)(d.a,{name:"github"}),"Github:"," ",Object(R.jsx)("a",{href:"https://github.com/itworks99/sucker",children:"itworks99/sucker"})]}),Object(R.jsx)("p",{children:"Built with Bottle, Gunicorn, Python, React and Semantic-UI"}),Object(R.jsxs)("p",{children:["Created in Sydney with ",Object(R.jsx)(d.a,{color:"pink",name:"heart"})]})]})]}),Ze(be,"question","Confirm reload of the Squid base configuration file",Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(j.a.Content,{children:"This action will reload base configuration file with the version requested. Please note that any unsaved changes are going to be lost. Do you want to proceed?"}),Object(R.jsxs)(j.a.Actions,{children:[Object(R.jsx)(x.a,{negative:!0,onClick:function(){ue(!1)},children:"no"}),Object(R.jsx)(x.a,{positive:!0,children:"yes"})]})]}))]})}return lt}var I=document.getElementById("root");i.a.render(Object(R.jsx)(F,{}),I)}},[[160,1,2]]]);
//# sourceMappingURL=main.2d467bf6.chunk.js.map